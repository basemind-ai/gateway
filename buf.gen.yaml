version: v1
plugins:
    # typescript
    - plugin: buf.build/community/timostamm-protobuf-ts:v2.9.1
      out: gen/ts
      opt:
          - generate_dependencies
          - long_type_string
          - output_javascript_es2020
          - server_grpc1
          - force_client_none
    # golang
    - plugin: buf.build/grpc/go:v1.3.0
      out: gen/go
      opt:
          - paths=source_relative
    - plugin: buf.build/protocolbuffers/go
      out: gen/go
      opt:
          - paths=source_relative

    # java
    - plugin: buf.build/grpc/java:v1.58.0
      out: gen/java
      opt:
          - lite
    - plugin: buf.build/protocolbuffers/java
      out: gen/java
      opt:
          - lite
